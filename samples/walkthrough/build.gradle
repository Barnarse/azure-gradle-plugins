buildscript {
    ext {
        functionsCoreVersion     = "1.0.0-beta-2"
    }
    repositories {
        mavenCentral()
        jcenter()
        maven {
            url uri('C:/Users/elenla.REDMOND/.m2/repository')
        }
    }
    dependencies {
        classpath("com.microsoft.azure:azure-functions-java-core:1.0.0-beta-2")
        classpath group: 'com.microsoft.azure', name: 'azure-functions-gradle-plugin',
                version: '1.0-SNAPSHOT'
    }
}

apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'com.microsoft.azure.azurefunctions'

import com.microsoft.azure.gradle.functions.*;

dependencies {
    compile 'com.microsoft.azure:azure-functions-java-core:1.0.0-beta-2'
}

version = 'v0.15'

description = "walkthrough-functions-app"

tasks.withType(JavaCompile) {
	options.encoding = 'UTF-8'
}

//jar {
//    baseName = "walkthrough"
////    manifest { attributes "Main-Class": "com.microsoft.azure.sample.TodoApplication" }
//}

azurefunctions {
    authFile = 'C:/stuff/my.azureauth'
}

task packageFunction(type: PackageTask) {
    dependsOn jar
    appName = "lenaFunctionApp"
    resourceGroup = "lenaFunctionApp"
    region = "westus"
}

task azureFunctionsDeploy(type: DeployTask) {
    appName = "lenaFunctionApp"
    resourceGroup = "lenaFunctionApp"
    region = "westus"
}

task run(type: RunTask) {
    appName = "lenaFunctionApp"
    resourceGroup = "lenaFunctionApp"
    region = "westus"
}

task add(type: AddTask) {
    functionPackageName = "my.function"
    functionTemplate = "HttpTrigger"
}

repositories {
     maven { url "http://repo.maven.apache.org/maven2" }
}
